(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(24),c=a.n(o),i=a(15),l=a(5),s=a(32),u=a(1),p=a(48),d={pathways:{},nodes:{},links:{}},m=["light-blue","purple","light-green","red","orange-yellow"];function h(e){return Object.keys(e).map(function(e){return parseInt(e)})}function f(e){var t=h(e);return 0===t.length?1:1+Math.max.apply(Math,Object(p.a)(t))}var y=a(6),v=a(7),b=a(9),E=a(8),g=a(10),k=a(4),w={transform:k.h.scale(1)};function O(e){return{x:100*Math.round(e.x/100),y:100*Math.round(e.y/100)}}var j=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(b.a)(this,Object(E.a)(t).call(this,e))).svg=void 0,a.gridPattern=void 0,a.container=void 0,a.state=Object(u.a)({},w),a.svg=r.a.createRef(),a.gridPattern=r.a.createRef(),a.container=r.a.createRef(),a}return Object(g.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.assert(null!==this.svg.current);var t=k.f(this.svg.current);t.on("mousemove",function(){var t=e.state.transform.invert(k.e(e.svg.current)),a={x:t[0],y:t[1]};e.props.dispatch({type:"set mouse position",coords:a})});var a=k.g().clickDistance(5).on("zoom",function(){e.setState({transform:k.c.transform.scale(1)})});t.call(a),t.on("dblclick.zoom",null)}},{key:"componentDidUpdate",value:function(){var e=k.f(this.svg.current),t=k.f(this.container.current),a=k.f(this.gridPattern.current);e.on("click",this.props.onClick||function(){});var n=this.state.transform.toString();a.attr("patternTransform",n),t.attr("transform",n)}},{key:"render",value:function(){return r.a.createElement("svg",{ref:this.svg,style:this.props.style},r.a.createElement("defs",null,r.a.createElement("pattern",{ref:this.gridPattern,id:"atlas-grid-pattern",width:"100",height:"100",patternUnits:"userSpaceOnUse"},r.a.createElement("path",{d:"M 100 0 L 0 0 0 100",fill:"none",stroke:"gray",strokeWidth:"1"}))),r.a.createElement("rect",{width:"100%",height:"100%",fill:"url(#atlas-grid-pattern)"}),r.a.createElement("g",{ref:this.container},this.props.children))}}]),t}(r.a.Component);var N=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(b.a)(this,Object(E.a)(t).call(this,e))).ref=void 0,a.ref=r.a.createRef(),a.state={dragPosition:void 0},a}return Object(g.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.assert(null!==this.ref.current);var t=k.f(this.ref.current),a=k.b().clickDistance(5).on("drag",function(){e.setState({dragPosition:O({x:k.c.x,y:k.c.y})})}).on("end",function(){var t=e.props,a=t.dispatch,n=t.id,r=t.node,o=e.state.dragPosition;void 0!==o&&(a(function(e,t,a){return{type:"update node",id:e,node:Object(u.a)({},t,{coords:a})}}(n,r,o)),e.setState({dragPosition:void 0}))});t.call(a),t.on("click",function(){e.props.onClick&&e.props.onClick(),k.c.stopPropagation()})}},{key:"render",value:function(){var e=this.state.dragPosition||this.props.node.coords,t=void 0!==this.state.dragPosition;return r.a.createElement("circle",{className:"node",opacity:t?.5:1,ref:this.ref,cx:e.x,cy:e.y,r:20})}}]),t}(r.a.Component),C=Object(l.b)(function(e){return{}},function(e){return{dispatch:e}})(N);var S=function(e){var t=e.coords;return r.a.createElement("circle",{opacity:.5,cx:t.x,cy:t.y,r:20})};function x(e){throw new Error("A `switch` statement failed to account for all possibilities")}var P=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(b.a)(this,Object(E.a)(t).call(this,e))).ref=void 0,a.ref=r.a.createRef(),a.state={dragPosition:void 0},a}return Object(g.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.assert(null!==this.ref.current);var t=k.f(this.ref.current),a=k.b().clickDistance(5).on("drag",function(){e.setState({dragPosition:O({x:k.c.x,y:k.c.y})})}).on("end",function(){var t=e.state.dragPosition;void 0!==t&&(e.props.updatePosition(t),e.setState({dragPosition:void 0}))});t.call(a)}},{key:"render",value:function(){var e=this.state.dragPosition||this.props.coords,t=void 0!==this.state.dragPosition;return r.a.createElement("circle",{className:"marker has-color-"+this.props.color,opacity:t?.5:1,ref:this.ref,cx:e.x,cy:e.y,r:10})}}]),t}(r.a.Component),B=k.d().curve(k.a).x(function(e){return e.x}).y(function(e){return e.y}),D=function(e){var t=e.points,a=e.color;return r.a.createElement("path",{className:"has-stroke-"+a,d:B(t)||void 0,fill:"transparent",strokeWidth:"10"})},T=Object(l.b)(function(e){return{model:e.model.present}},function(e){return{dispatch:e}})(function(e){var t=e.id,a=e.link,n=e.model,o=e.cursor,c=e.dispatch,i=a.src,l=a.dst,s=a.intermediates,p=n.nodes[i].coords,d=l?n.nodes[l].coords:o,m=[].concat([p],s,[d]),h=n.pathways[a.pathway].color;return r.a.createElement("g",null,r.a.createElement(D,{points:m,color:h}),s.map(function(e,n){return r.a.createElement(P,{key:t+"-"+n,color:h,coords:e,updatePosition:function(e){return function(e,n){if(t&&a.dst){var r=s.slice();r[n]=e;var o=Object(u.a)({},a,{intermediates:r});c({type:"update link",link:o,id:t})}}(e,n)}})}))});var L=Object(l.b)(function(e){return{state:e.ui.atlas,model:e.model.present}},function(e){return{dispatch:e}})(function(e){var t=e.style,a=e.state,n=e.dispatch,o=e.model,c=a.cursor,i=a.mode,l=function(e){return function(){switch(i.type){case"Normal":return function(e){n({type:"prompt to edit node",id:e})}(e);case"CreateNode":return;case"SelectLinkSource":return n({type:"prompt to select link target",link:{src:e,dst:void 0,pathway:i.pathway,intermediates:[]}});case"SelectLinkTarget":return n({type:"create link",link:Object(u.a)({},i.link,{dst:e})}),void n({type:"prompt to select link source",pathway:i.link.pathway})}return x()}};return r.a.createElement(j,{style:t,dispatch:n,onClick:function(){switch(i.type){case"CreateNode":return void(c&&n({type:"prompt to create node with coords",coords:O(c)}));case"SelectLinkTarget":var e=[].concat(i.link.intermediates,[O(a.cursor)]),t=Object(u.a)({},i.link,{intermediates:e});return n({type:"prompt to select link target",link:t});case"SelectLinkSource":case"Normal":return}return x()}},function(e){return h(e.links).map(function(t){return[t,e.links[t]]})}(o).map(function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1];return r.a.createElement(T,{key:a,id:a,link:n})}),"SelectLinkTarget"===i.type&&r.a.createElement(T,{link:i.link,cursor:c&&O(c)}),function(e){return h(e.nodes).map(function(t){return[t,e.nodes[t]]})}(o).map(function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1];return r.a.createElement(C,{key:a,id:a,node:n,onClick:l(a)})}),c&&function(){switch(i.type){case"CreateNode":return!0}return!1}()&&r.a.createElement(S,{coords:O(c)}))});var U=a(11),I=a(3),M=a(17);function R(e){var t=e.color?"has-text-"+e.color:"",a=["icon",e.container?"is-"+e.container:"",t].join(" ");return r.a.createElement("span",{className:a},r.a.createElement(M.a,{icon:e.icon,size:e.iconSize}))}function A(e){function t(t){return{borderColor:t===e.selected?"#777":"transparent",borderWidth:"2px"}}return r.a.createElement("div",{className:"buttons is-centered"},m.map(function(a){return r.a.createElement("button",{onClick:function(t){return e.onClick(a)},className:"button is-hovered is-large",key:a,type:"button",style:t(a)},r.a.createElement(R,{icon:I.d,color:a,container:"medium",iconSize:"2x"}))}))}function J(e){return r.a.createElement("nav",{className:"panel"},r.a.createElement("div",{className:"panel-heading"},r.a.createElement("div",{className:"level"},r.a.createElement("div",{className:"level-left"},r.a.createElement("div",{className:"level-item"},r.a.createElement("button",{className:"button",onClick:e.goBack},r.a.createElement(R,{icon:I.a}))),r.a.createElement("div",{className:"level-item"},r.a.createElement("p",null,e.title))))),e.children)}var z=function(e){function t(e){var a;Object(y.a)(this,t);var n=(a=Object(b.a)(this,Object(E.a)(t).call(this,e))).props.oldState;return a.state={name:n?n.name:"",color:n?n.color:void 0,noNameError:!1,noColorError:!1},a.handleChange=a.handleChange.bind(Object(U.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(U.a)(a)),a.setColor=a.setColor.bind(Object(U.a)(a)),a}return Object(g.a)(t,e),Object(v.a)(t,[{key:"handleChange",value:function(e){var t=e.target.value;this.setState({name:t,noNameError:this.state.noNameError&&""===t.trim()})}},{key:"setColor",value:function(e){this.setState({color:e,noColorError:!1})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=!1;void 0===this.state.color&&(this.setState({noColorError:!0}),t=!0),""===this.state.name.trim()&&(this.setState({noNameError:!0}),t=!0),t||this.props.onSubmit({name:this.state.name.trim(),color:this.state.color})}},{key:"render",value:function(){return r.a.createElement(J,{title:this.props.title,goBack:this.props.goBack},r.a.createElement("form",{className:"panel-block",onSubmit:this.handleSubmit,style:{display:"block"}},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Name"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"Pathway name",type:"text",value:this.state.name,onChange:this.handleChange})),this.state.noNameError&&r.a.createElement("p",{className:"help is-danger"},r.a.createElement(R,{icon:I.g}),"Please enter a name for the pathway.")),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Color"),r.a.createElement(A,{selected:this.state.color,onClick:this.setColor}),this.state.noColorError&&r.a.createElement("p",{className:"help is-danger"},r.a.createElement(R,{icon:I.g}),"Please select a color for this pathway.")),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{className:"button is-primary is-fullwidth"},r.a.createElement(R,{icon:I.i}),r.a.createElement("span",null,this.props.submitButtonText)),this.props.onDelete&&r.a.createElement("button",{className:"button is-hover is-danger is-outlined is-fullwidth",type:"button",onClick:this.props.onDelete},r.a.createElement(R,{icon:I.h}),r.a.createElement("span",null,"Delete Pathway")))))}}]),t}(r.a.Component);function F(e){return r.a.createElement(J,{title:"Pathways",goBack:e.goBack},h(e.pathways).map(function(t){return r.a.createElement(W,Object.assign({key:t},e.pathways[t],{selectPathway:function(a){return e.onSelect(t)}}))}),e.onCreate&&r.a.createElement("div",{className:"panel-block"},r.a.createElement("button",{onClick:e.onCreate,type:"button",className:"button is-white is-fullwidth"},r.a.createElement(R,{icon:I.i}),r.a.createElement("span",null," Create a new pathway"))))}function W(e){return r.a.createElement("label",{className:"panel-block",onClick:e.selectPathway},r.a.createElement("span",{className:"panel-icon has-text-"+e.color},r.a.createElement(M.a,{icon:I.d})),e.name)}var H=a(46),q=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(b.a)(this,Object(E.a)(t).call(this,e))).input=void 0,a.input=r.a.createRef(),a.handleUpload=a.handleUpload.bind(Object(U.a)(a)),a}return Object(g.a)(t,e),Object(v.a)(t,[{key:"handleUpload",value:function(e){var t=this,a=this.input.current.files,n=new FileReader;n.onabort=function(){return console.log("file reading was aborted")},n.onerror=function(){return console.log("file reading has failed")},n.onload=function(){console.log(n.result);var e=JSON.parse(n.result);console.log(e),t.props.setModel(e)},n.readAsText(a[0])}},{key:"importFile",value:function(e){}},{key:"render",value:function(){return r.a.createElement(J,{title:"Import Data File",goBack:this.props.goBack},r.a.createElement("div",{className:"panel-block",style:{padding:"3rem"}},r.a.createElement("div",{className:"file is-boxed is-centered is-vcentered"},r.a.createElement("label",{className:"file-label"},r.a.createElement("input",{className:"file-input",type:"file",ref:this.input,onChange:this.handleUpload}),r.a.createElement("span",{className:"file-cta"},r.a.createElement("span",{className:"file-icon"},r.a.createElement(R,{icon:I.m})),r.a.createElement("span",{className:"file-label"},"Choose a file\u2026"))))))}}]),t}(r.a.Component),G=function(e){var t=e.onClick,a=e.icon,n=e.text;return r.a.createElement("label",{className:"panel-block",onClick:t},r.a.createElement("span",{className:"panel-icon"},r.a.createElement(M.a,{icon:a})),n)},K=function(e){var t=e.heading,a=e.panelItems;return r.a.createElement("nav",{className:"panel"},r.a.createElement("div",{className:"panel-heading"},t),a.map(function(e){return r.a.createElement(G,Object.assign({key:e.text},e))}))},Q=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(b.a)(this,Object(E.a)(t).call(this,e))).state={name:a.props.oldState.name,noNameError:!1},a.handleChange=a.handleChange.bind(Object(U.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(U.a)(a)),a}return Object(g.a)(t,e),Object(v.a)(t,[{key:"componentDidUpdate",value:function(e){e.oldState!==this.props.oldState&&this.setState({name:this.props.oldState.name,noNameError:!1})}},{key:"handleChange",value:function(e){var t=e.target.value;this.setState({name:t,noNameError:this.state.noNameError&&""===t.trim()})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=!1;""===this.state.name.trim()&&(this.setState({noNameError:!0}),t=!0),t||this.props.onSubmit({name:this.state.name.trim(),coords:this.props.oldState.coords})}},{key:"render",value:function(){return r.a.createElement(J,{title:this.props.title,goBack:this.props.goBack},r.a.createElement("form",{className:"panel-block",onSubmit:this.handleSubmit,style:{display:"block"}},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Name"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"Node name",type:"text",value:this.state.name,onChange:this.handleChange})),this.state.noNameError&&r.a.createElement("p",{className:"help is-danger"},r.a.createElement(R,{icon:I.g}),"Please enter a name for the node.")),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{className:"button is-primary is-fullwidth"},r.a.createElement(R,{icon:I.i}),r.a.createElement("span",null,this.props.submitButtonText)),this.props.onDelete&&r.a.createElement("button",{className:"button is-hover is-danger is-outlined is-fullwidth",type:"button",onClick:this.props.onDelete},r.a.createElement(R,{icon:I.h}),r.a.createElement("span",null,"Delete Node")))))}}]),t}(r.a.Component);function V(e){return{mode:e.ui.toolbar,model:e.model.present}}function X(e){return{dispatch:e}}var Y=Object(l.b)(V,X)(function(e){var t=e.model,a=e.dispatch,n=[{text:"Create Node",icon:I.c,onClick:function(){a({type:"prompt to select a location for new node"})}},{text:"Create Link",icon:I.b,onClick:function(){a({type:"prompt to select a pathway for new links"})}},{text:"Create Pathway",icon:I.j,onClick:function(){a({type:"prompt to create a pathway"})}},{text:"Edit Pathway",icon:I.f,onClick:function(){a({type:"prompt to select a pathway for editing"})}},{text:"Import Data",icon:I.m,onClick:function(){a({type:"prompt to upload app state"})}},{text:"Export Data",icon:I.e,onClick:function(){return function(e){var t=new Blob([JSON.stringify(e,null,2)],{type:"application/json;charset=utf-8"});Object(H.saveAs)(t,"atlas.json")}(t)}}];return r.a.createElement(K,{heading:"Select an Action",panelItems:n})});var Z=Object(l.b)(V,X)(function(e){var t=e.dispatch;return r.a.createElement(J,{title:"Place a Node",goBack:function(){t({type:"go home"})}})});var $=Object(l.b)(V,X)(function(e){var t=e.dispatch,a=e.coords;return r.a.createElement(Q,{title:"Create Node",submitButtonText:"Create",oldState:{name:"",coords:a},onSubmit:function(e){t({type:"create node",node:e}),t({type:"go home"})},goBack:function(){t({type:"go home"})}})});var _=Object(l.b)(V,X)(function(e){var t=e.dispatch,a=e.model,n=e.id,o=a.nodes[n];return r.a.createElement(Q,{title:"Edit Node",submitButtonText:"Update",oldState:o,onSubmit:function(e){t({type:"update node",node:e,id:n}),t({type:"go home"})},goBack:function(){t({type:"go home"})},onDelete:function(){t({type:"go home"}),t({type:"delete node",id:n})}})});var ee=Object(l.b)(V,X)(function(e){var t=e.model,a=e.dispatch;return r.a.createElement(z,Object.assign({},t,{onSubmit:function(e){a({type:"create pathway",pathway:e}),a({type:"go home"})},goBack:function(){a({type:"go home"})},title:"Create a Pathway",submitButtonText:"Create"}))});var te=Object(l.b)(V,X)(function(e){var t=e.model,a=e.dispatch;return r.a.createElement(F,{pathways:t.pathways,goBack:function(){a({type:"go home"})},onSelect:function(e){a({type:"prompt to edit pathway",id:e})}})});var ae=Object(l.b)(V,X)(function(e){var t=e.model,a=e.dispatch,n=e.id;return r.a.createElement(z,{oldState:t.pathways[n],onSubmit:function(e){a({type:"update pathway",id:n,pathway:e}),a({type:"prompt to select a pathway for editing"})},onDelete:function(){a({type:"delete pathway",id:n}),a({type:"prompt to select a pathway for editing"})},goBack:function(){a({type:"prompt to select a pathway for editing"})},title:"Edit Pathway",submitButtonText:"Confirm changes"})});var ne=Object(l.b)(V,X)(function(e){var t=e.model,a=e.dispatch;return r.a.createElement(q,Object.assign({},t,{goBack:function(){a({type:"go home"})},setModel:function(e){a({type:"set model",model:e}),a({type:"go home"})}}))});var re=Object(l.b)(V,X)(function(e){var t=e.model,a=e.dispatch;return r.a.createElement(F,{pathways:t.pathways,goBack:function(){a({type:"go home"})},onSelect:function(e){a({type:"prompt to select link source",pathway:e})}})});var oe=Object(l.b)(V,X)(function(e){var t=e.dispatch;return e.pathway,r.a.createElement(J,{title:"Create Links",goBack:function(){t({type:"go home"})}})});var ce=Object(l.b)(V,X)(function(e){var t=e.mode;switch(t.type){case"Home":return r.a.createElement(Y,null);case"SelectNodeLocation":return r.a.createElement(Z,null);case"CreatePathway":return r.a.createElement(ee,null);case"SelectPathwayToEdit":return r.a.createElement(te,null);case"EditThisPathway":return r.a.createElement(ae,{id:t.id});case"ImportDataAction":return r.a.createElement(ne,null);case"CreateNode":return r.a.createElement($,{coords:t.coords});case"EditNode":return r.a.createElement(_,{id:t.id});case"SelectPathwayForLink":return r.a.createElement(re,null);case"CreateLink":return r.a.createElement(oe,{pathway:t.pathway})}});function ie(e){return r.a.createElement("div",{style:e.style},r.a.createElement("div",{className:"field has-addons"},r.a.createElement("p",{className:"control"},r.a.createElement("button",{className:"button",onClick:e.undo,disabled:!e.canUndo},r.a.createElement("span",{className:"icon is-small"},r.a.createElement(R,{icon:I.l})),r.a.createElement("span",null,"Undo"))),r.a.createElement("p",{className:"control"},r.a.createElement("button",{className:"button",onClick:e.redo,disabled:!e.canRedo},r.a.createElement("span",{className:"icon is-small"},r.a.createElement(R,{icon:I.k})),r.a.createElement("span",null,"Redo")))))}var le=Object(l.b)(function(e){return{state:e}},function(e){return{dispatch:e}})(function(e){var t=e.state,a=e.dispatch;return r.a.createElement("div",null,r.a.createElement(L,{style:{position:"absolute",height:"100%",width:"100%"}}),r.a.createElement("div",{style:{position:"fixed",top:"2rem",left:"1.5rem",maxWidth:"400px"}},r.a.createElement(ce,null)),r.a.createElement(ie,{style:{position:"fixed",top:"2rem",right:"1.5rem"},undo:function(){return a({type:"@history/undo"})},redo:function(){return a({type:"@history/redo"})},canUndo:t.model.past.length>0,canRedo:t.model.future.length>0}))}),se=(a(61),a(47)),ue=a.n(se);var pe=function(e,t){var a={past:[],future:[],present:void 0};return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"@history/undo":return function(e){if(e.past.length>0){var t=e.future.slice();t.push(e.present);var a=e.past.slice();return{present:a.pop(),past:a,future:t}}}(n)||n;case"@history/redo":return function(e){if(e.future.length>0){var t=e.past.slice();t.push(e.present);var a=e.future.slice();return{present:a.pop(),past:t,future:a}}}(n)||n;default:return function(t,a){if(void 0===t.present)return{past:[],future:[],present:a};var n=t;if(ue()(a,n.present))return n;var r=n.past.length>=e.limit?1:0;return{past:n.past.concat([n.present]).slice(r),present:a,future:[]}}(n,t(n.present,r))}}}({limit:50},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"create node":return function(e,t){var a=f(t.nodes),n=Object(u.a)({},t.nodes);return n[a]=e,Object(u.a)({},t,{nodes:n})}(t.node,e);case"update node":return function(e,t,a){var n=Object(u.a)({},a.nodes);return n[e]=t,Object(u.a)({},a,{nodes:n})}(t.id,t.node,e);case"delete node":return function(e,t){var a=Object(u.a)({},t.nodes);delete a[e];var n={};for(var r in t.links){var o=t.links[r];o.src!==e&&o.src!==e&&(n[r]=o)}return Object(u.a)({},t,{nodes:a,links:n})}(t.id,e);case"create pathway":return function(e,t){var a=f(t.pathways),n=Object(u.a)({},t.pathways);return n[a]=e,Object(u.a)({},t,{pathways:n})}(t.pathway,e);case"update pathway":return function(e,t,a){var n=Object(u.a)({},a.pathways);return n[e]=t,Object(u.a)({},a,{pathways:n})}(t.id,t.pathway,e);case"delete pathway":return function(e,t){var a=Object(u.a)({},t.pathways);delete a[e];var n={};for(var r in t.links){var o=t.links[r];o.pathway!==e&&(n[r]=o)}return Object(u.a)({},t,{links:n,pathways:a})}(t.id,e);case"create link":return function(e,t){var a=f(t.links),n=Object(u.a)({},t.links);return n[a]=e,Object(u.a)({},t,{links:n})}(t.link,e);case"update link":return function(e,t,a){var n=Object(u.a)({},a.links);return n[e]=t,Object(u.a)({},a,{links:n})}(t.id,t.link,e);case"delete link":return function(e,t){var a=Object(u.a)({},t.links);return delete a[e],Object(u.a)({},t,{links:a})}(t.id,e);case"set model":return t.model;default:return e}}),de={type:"Home"};var me={type:"Normal"},he={type:"CreateNode"},fe=function(e){return{type:"SelectLinkSource",pathway:e}},ye=function(e){return{type:"SelectLinkTarget",link:e}};var ve=Object(i.b)({model:pe,ui:Object(i.b)({toolbar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"go home":return{type:"Home"};case"prompt to create a pathway":return{type:"CreatePathway"};case"prompt to select a pathway for editing":return{type:"SelectPathwayToEdit"};case"prompt to edit pathway":return{type:"EditThisPathway",id:t.id};case"prompt to upload app state":return{type:"ImportDataAction"};case"prompt to select a location for new node":return{type:"SelectNodeLocation"};case"prompt to create node with coords":return{type:"CreateNode",coords:t.coords};case"prompt to edit node":return{type:"EditNode",id:t.id};case"prompt to select a pathway for new links":return{type:"SelectPathwayForLink"};case"prompt to select link source":return{type:"CreateLink",pathway:t.pathway};default:return e}},atlas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{mode:me},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"go home":return Object(u.a)({},e,{mode:me});case"prompt to select a location for new node":return Object(u.a)({},e,{mode:he});case"prompt to create node with coords":return Object(u.a)({},e,{mode:me});case"set mouse position":return Object(u.a)({},e,{cursor:t.coords});case"prompt to select link source":return Object(u.a)({},e,{mode:fe(t.pathway)});case"prompt to select link target":return Object(u.a)({},e,{mode:ye(t.link)});default:return e}}})}),be=function(e,t){var a=!1,n=null;function r(){localStorage.setItem(e,JSON.stringify(n)),a=!1}return{put:function(e){n=e,a||setTimeout(r,t),a=!0},get:function(){var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}}}("AppState",3e3),Ee=be.get(),ge=Object(i.c)(ve,Ee);ge.subscribe(function(){var e=ge.getState().model;be.put({model:e})}),c.a.render(r.a.createElement(l.a,{store:ge},r.a.createElement(le,null),","),document.getElementById("root"))},49:function(e,t,a){e.exports=a(129)},61:function(e,t,a){}},[[49,1,2]]]);
//# sourceMappingURL=main.002241cd.chunk.js.map